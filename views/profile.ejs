<%- include("partials/header") %>

<div class="container mt-4">
  <div class="d-flex align-items-center mb-4">
    <% if (user.profileImage) { %>
      <img src="<%= user.profileImage ? user.profileImage : '/images/default.png' %>" class="img-fluid rounded-circle mb-3" width="150" height="150">
    <% } else { %>
      <img src="/default-profile.png" class="rounded-circle me-3" width="80" height="80">
    <% } %>
    <h3><%= user.name %></h3>
  </div>

  <h4 class="mb-3">Posts by <%= user.name %></h4>

  <% if (posts.length === 0) { %>
    <p>No posts yet.</p>
  <% } %>

  <% posts.forEach(post => { %>
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="card-title"><a href="/posts/<%= post._id %>"><%= post.title %></a></h5>
        <p class="card-text"><%= post.content.slice(0, 100) %>...</p>
        <small class="text-muted">Likes: <%= post.likes.length %> | Comments: <%= post.comments.length %></small>
      </div>
    </div>
  <% }); %>
</div>

<%- include("partials/footer") %>
